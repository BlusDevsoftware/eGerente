<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestor de Comissões - Recebimento</title>
    <link rel="icon" type="image/png" href="assets/images/logo2.png">
    <link rel="stylesheet" href="styles/styles.css">
    <link rel="stylesheet" href="styles/login.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Estilos seguindo o padrão do sistema */
        .main-content {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 24px;
        }

        .card {
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(33,150,243,0.07);
            padding: 20px;
            border: 1px solid #e3f2fd;
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .card-header h3 {
            margin: 0;
            color: #1565c0;
            font-size: 0.95em;
            font-weight: 600;
        }

        .card-header i {
            color: #1976D2;
            font-size: 1.2em;
        }

        .card-value {
            font-size: 1.8em;
            font-weight: 700;
            color: #1976D2;
            margin-bottom: 5px;
        }

        .card-change {
            font-size: 0.85em;
            color: #27ae60;
            font-weight: 500;
        }

        .filters-container {
            display: flex;
            gap: 18px;
            align-items: center;
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 1px 4px rgba(33,150,243,0.08);
            padding: 18px 24px;
            margin-bottom: 24px;
            width: 100%;
            box-sizing: border-box;
        }

        .search-box {
            display: flex;
            align-items: center;
            background: #f4faff;
            border: 1.5px solid #90caf9;
            border-radius: 8px;
            padding: 6px 14px;
            color: #1565c0;
            font-size: 1em;
            box-shadow: 0 1px 4px rgba(33,150,243,0.04);
        }

        .search-box input[type='text'] {
            border: none;
            background: transparent;
            color: #1565c0;
            font-size: 1em;
            outline: none;
            margin-left: 8px;
            width: 220px;
            min-width: 160px;
            max-width: 100%;
        }

        .filter-options {
            display: flex;
            gap: 12px;
            align-items: center;
            flex-wrap: wrap;
        }

        .filter-options select,
        .filter-options input[type='date'] {
            border: 1.5px solid #90caf9;
            border-radius: 8px;
            background: #f4faff;
            color: #1565c0;
            font-size: 1em;
            padding: 7px 12px;
            box-shadow: 0 1px 4px rgba(33,150,243,0.04);
            transition: border-color 0.2s, box-shadow 0.2s;
            width: 180px;
            min-width: 140px;
        }

        .filter-options select:focus,
        .filter-options input[type='date']:focus {
            outline: none;
            border-color: #1976D2;
            box-shadow: 0 2px 8px rgba(33,150,243,0.15);
        }

        .btn-filter {
            background: #1976D2;
            color: #fff;
            border: none;
            border-radius: 6px;
            padding: 8px 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
            font-size: 0.9em;
        }

        .btn-filter:hover {
            background: #1565c0;
        }

        .btn-secondary {
            background: #fff;
            color: #1976D2;
            border: 1.5px solid #2196F3;
        }

        .btn-secondary:hover {
            background: #f4faff;
        }

        .charts-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 24px;
        }

        .chart-container {
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(33,150,243,0.07);
            padding: 20px;
            border: 1px solid #e3f2fd;
        }

        .chart-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .chart-title {
            font-size: 1.1em;
            font-weight: 600;
            color: #1565c0;
            margin: 0;
        }

        .chart-legend {
            display: flex;
            gap: 15px;
            font-size: 0.8em;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 2px;
        }

        .table-scroll {
            max-height: 85vh;
            overflow-y: auto;
            position: relative;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(33,150,243,0.07);
            background: #fff;
            margin-bottom: 16px;
            padding-bottom: 24px;
            flex: 1 1 auto;
        }

        .table-scroll table {
            width: 100%;
            border-collapse: collapse;
        }

        .table-scroll th, .table-scroll td {
            border: 1px solid #eee;
            padding: 10px 8px;
            text-align: center;
            font-size: 1em;
        }

        .table-scroll th {
            background: #e3f2fd;
            color: #1565c0;
            font-weight: 600;
            position: sticky;
            top: 0;
            z-index: 2;
        }

        .table-scroll td {
            background: #fff;
            color: #333;
        }

        .table-scroll tr:last-child td {
            border-bottom: none;
        }

        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-recebido {
            background: #d4edda;
            color: #155724;
        }

        .status-pendente {
            background: #fff3cd;
            color: #856404;
        }

        .status-atrasado {
            background: #f8d7da;
            color: #721c24;
        }

        .action-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 5px;
            margin: 0 2px;
            border-radius: 4px;
            transition: background 0.2s;
        }

        .action-btn:hover {
            background: #f4faff;
        }

        .view-btn {
            color: #1976D2;
        }

        .edit-btn {
            color: #ff9800;
        }

        .pagination {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 20px;
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(33,150,243,0.07);
            margin-top: 16px;
        }

        .pagination button {
            padding: 8px 12px;
            border: 1px solid #90caf9;
            background: #fff;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            color: #1565c0;
            font-weight: 500;
        }

        .pagination button:hover {
            background: #f4faff;
            border-color: #1976D2;
        }

        .pagination button.active {
            background: #1976D2;
            color: white;
            border-color: #1976D2;
        }

        .pagination button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        @media (max-width: 768px) {
            .charts-section {
                grid-template-columns: 1fr;
            }
            
            .filter-options {
                flex-direction: column;
                align-items: stretch;
            }
            
            .filter-options select,
            .filter-options input[type='date'] {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="logo" style="display: flex; align-items: center; justify-content: center; padding: 15px 0;">
            <img src="../Imagens/logo2.png" alt="BlueDev Logo" style="height: 2.5em; margin-right: 10px;"><h1><span class="orange">e-</span><span class="highlight">Gerente</span></h1>
        </div>
        <ul class="nav-menu">
            <li><a href="index.html"><i class="fas fa-home"></i><span>Dashboard</span></a></li>
            <li class="has-submenu">
                <a href="#" class="submenu-trigger"><i class="fas fa-user-plus"></i><span>Cadastros</span><i class="fas fa-chevron-down submenu-icon"></i></a>
                <ul class="submenu">
                    <li><a href="colaboradores.html"><i class="fas fa-users"></i><span>Colaboradores</span></a></li>
                    <li><a href="clientes.html"><i class="fas fa-user-tie"></i><span>Clientes</span></a></li>
                    <li><a href="produtos.html"><i class="fas fa-box"></i><span>Produtos</span></a></li>
                    <li><a href="servicos.html"><i class="fas fa-cogs"></i><span>Serviços</span></a></li>
                    <li><a href="usuarios.html"><i class="fas fa-user-shield"></i><span>Usuários</span></a></li>
                </ul>
            </li>
            <li class="has-submenu">
                <a href="#" class="submenu-trigger"><i class="fas fa-hand-holding-usd"></i><span>Comissões</span><i class="fas fa-chevron-down submenu-icon"></i></a>
                <ul class="submenu">
                    <li><a href="lancar-comissao.html"><i class="fas fa-plus-circle"></i><span>Lançar</span></a></li>
                    <li><a href="movimento-comissao.html"><i class="fas fa-exchange-alt"></i><span>Movimento</span></a></li>
                    <li><a href="consulta-comissao.html"><i class="fas fa-search"></i><span>Consulta</span></a></li>
                </ul>
            </li>
            <li class="has-submenu">
                <a href="#" class="submenu-trigger"><i class="fas fa-chart-bar"></i><span>Relatórios</span><i class="fas fa-chevron-down submenu-icon"></i></a>
                <ul class="submenu">
                    <li><a href="recebimento.html" class="active"><i class="fas fa-money-bill-wave"></i><span>Recebimento</span></a></li>
                    <li><a href="conferencia.html"><i class="fas fa-check-circle"></i><span>Conferência</span></a></li>
                    <li><a href="dinamico.html"><i class="fas fa-chart-line"></i><span>Dinâmico</span><span class="beta-tag">beta</span></a></li>
                </ul>
            </li>
            <li class="has-submenu">
                <a href="#" class="submenu-trigger"><i class="fas fa-cog"></i><span>Configurações</span><i class="fas fa-chevron-down submenu-icon"></i></a>
                <ul class="submenu">
                    <li><a href="manutencao-bd.html"><i class="fas fa-database"></i><span>Manutenção BD</span></a></li>
                    <li><a href="sincronizar.html"><i class="fas fa-sync"></i><span>Sincronizar</span></a></li>
                </ul>
            </li>
        </ul>
        <div class="logout-button">
            <a href="index.html"><i class="fas fa-sign-out-alt"></i><span>Sair</span></a>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Header -->
        <div class="header">
            <div class="welcome-text">
                <h1>Relatório de Recebimento</h1>
                <p>Meu Dashboard Financeiro - Acompanhe sua situação financeira</p>
            </div>
            <div class="user-info">
                <div class="notifications">
                    <i class="fas fa-bell"></i>
                    <span class="badge">3</span>
                </div>
                <div class="user-avatar">A</div>
            </div>
        </div>

        <!-- Summary Cards -->
        <div class="dashboard-cards">
            <div class="card">
                <div class="card-header">
                    <h3>Total Recebido</h3>
                    <i class="fas fa-money-bill-wave"></i>
                </div>
                <div class="card-value" id="totalRecebido">R$ 25.750,00</div>
                <div class="card-change" id="totalRecebidoChange">+12% este mês</div>
            </div>
            <div class="card">
                <div class="card-header">
                    <h3>Pendentes</h3>
                    <i class="fas fa-clock"></i>
                </div>
                <div class="card-value" id="totalPendente">R$ 8.250,00</div>
                <div class="card-change" id="totalPendenteChange">5 títulos aguardando</div>
            </div>
            <div class="card">
                <div class="card-header">
                    <h3>Cliente Não Pagou</h3>
                    <i class="fas fa-exclamation-circle"></i>
                </div>
                <div class="card-value" id="totalAtrasado">R$ 3.500,00</div>
                <div class="card-change" id="totalAtrasadoChange">3 títulos em atraso</div>
            </div>
            <div class="card">
                <div class="card-header">
                    <h3>Média Mensal</h3>
                    <i class="fas fa-chart-line"></i>
                </div>
                <div class="card-value" id="mediaMensal">R$ 22.500,00</div>
                <div class="card-change" id="mediaMensalChange">Últimos 6 meses</div>
            </div>
        </div>

        <!-- Filters -->
        <div class="filters-container">
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" placeholder="Buscar títulos...">
            </div>
            <div class="filter-options">
                <select id="periodo">
                    <option value="mes_atual">Mês Atual</option>
                    <option value="ultimos_3_meses">Últimos 3 Meses</option>
                    <option value="ultimos_6_meses">Últimos 6 Meses</option>
                    <option value="ano_atual">Ano Atual</option>
                    <option value="personalizado">Personalizado</option>
                </select>
                <select id="status">
                    <option value="">Todos os Status</option>
                    <option value="recebido">Recebido</option>
                    <option value="pendente">Pendente</option>
                    <option value="atrasado">Cliente Não Pagou</option>
                </select>
                <select id="cliente">
                    <option value="">Todos os Clientes</option>
                    <option value="cliente1">Cliente A</option>
                    <option value="cliente2">Cliente B</option>
                    <option value="cliente3">Cliente C</option>
                </select>
                <input type="date" id="data_inicial" placeholder="Data inicial">
                <span style="margin: 0 6px; color: #1976D2; font-weight: bold;">até</span>
                <input type="date" id="data_final" placeholder="Data final">
                <button class="btn-filter" onclick="aplicarFiltros()">
                    <i class="fas fa-filter"></i>
                    Aplicar
                </button>
                <button class="btn-filter btn-secondary" onclick="limparFiltros()">
                    <i class="fas fa-times"></i>
                    Limpar
                </button>
            </div>
        </div>

        <!-- Charts Section -->
        <div class="charts-section">
            <div class="chart-container">
                <div class="chart-header">
                    <h3 class="chart-title">Evolução Mensal</h3>
                    <div class="chart-legend">
                        <div class="legend-item">
                            <div class="legend-color" style="background: #4CAF50;"></div>
                            <span>Recebido</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: #FF9800;"></div>
                            <span>Pendente</span>
                        </div>
                    </div>
                </div>
                <canvas id="evolucaoMensal" width="400" height="200"></canvas>
            </div>

            <div class="chart-container">
                <div class="chart-header">
                    <h3 class="chart-title">Distribuição por Status</h3>
                    <div class="chart-legend">
                        <div class="legend-item">
                            <div class="legend-color" style="background: #4CAF50;"></div>
                            <span>Recebido</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: #FF9800;"></div>
                            <span>Pendente</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: #f44336;"></div>
                            <span>Atrasado</span>
                        </div>
                    </div>
                </div>
                <canvas id="distribuicaoStatus" width="400" height="200"></canvas>
            </div>
        </div>

        <!-- Commissions Table -->
        <div class="table-scroll">
            <table id="recebimentoTable">
                <thead>
                    <tr>
                        <th>Data</th>
                        <th>Cliente</th>
                        <th>Valor</th>
                        <th>Status</th>
                        <th>Vencimento</th>
                        <th>Observações</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody id="recebimentoTableBody">
                    <!-- Dados serão carregados dinamicamente -->
                </tbody>
            </table>
        </div>

        <!-- Paginação e Ações -->
        <div class="filters-container" style="flex-shrink: 0; margin-bottom: 0; border-top: 1.5px solid #e3f2fd; border-radius: 10px 10px 0 0; justify-content: space-between;">
            <div>
                <button class="btn-filter" onclick="exportarDados()">
                    <i class="fas fa-file-export"></i>
                    Exportar
                </button>
                <button class="btn-filter btn-secondary" onclick="atualizarDados()">
                    <i class="fas fa-sync-alt"></i>
                    Atualizar
                </button>
            </div>
            <div class="pagination">
                <button onclick="mudarPagina('anterior')" id="btnAnterior">Anterior</button>
                <button class="active">1</button>
                <button onclick="mudarPagina('2')">2</button>
                <button onclick="mudarPagina('3')">3</button>
                <button onclick="mudarPagina('proximo')" id="btnProximo">Próximo</button>
            </div>
        </div>
    </div>

    <script>
        // Toggle submenu
        document.querySelectorAll('.submenu-trigger').forEach(trigger => {
            trigger.addEventListener('click', function(e) {
                e.preventDefault();
                this.parentElement.classList.toggle('active');
            });
        });

        // Dados mockados para demonstração
        const dadosMock = {
            titulos: [
                {
                    data: '2024-02-20',
                    cliente: 'Empresa ABC Ltda',
                    valor: 1500.00,
                    status: 'recebido',
                    vencimento: '2024-02-15',
                    observacoes: 'Pagamento referente a venda #123'
                },
                {
                    data: '2024-02-19',
                    cliente: 'Comércio XYZ',
                    valor: 2000.00,
                    status: 'pendente',
                    vencimento: '2024-02-25',
                    observacoes: 'Aguardando confirmação'
                },
                {
                    data: '2024-02-18',
                    cliente: 'Indústria DEF',
                    valor: 3500.00,
                    status: 'atrasado',
                    vencimento: '2024-01-30',
                    observacoes: 'Cliente não pagou'
                },
                {
                    data: '2024-02-17',
                    cliente: 'Loja GHI',
                    valor: 1200.00,
                    status: 'recebido',
                    vencimento: '2024-02-10',
                    observacoes: 'Pagamento em dia'
                },
                {
                    data: '2024-02-16',
                    cliente: 'Empresa JKL',
                    valor: 2800.00,
                    status: 'pendente',
                    vencimento: '2024-02-28',
                    observacoes: 'Aguardando pagamento'
                }
            ]
        };

        // Inicializar gráficos
        function inicializarGraficos() {
            // Gráfico de Evolução Mensal
            const ctxEvolucao = document.getElementById('evolucaoMensal').getContext('2d');
            new Chart(ctxEvolucao, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun'],
                    datasets: [{
                        label: 'Recebido',
                        data: [18000, 22000, 19500, 25000, 23000, 25750],
                        borderColor: '#4CAF50',
                        backgroundColor: 'rgba(76, 175, 80, 0.1)',
                        tension: 0.4
                    }, {
                        label: 'Pendente',
                        data: [5000, 8000, 6500, 7500, 9000, 8250],
                        borderColor: '#FF9800',
                        backgroundColor: 'rgba(255, 152, 0, 0.1)',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return 'R$ ' + value.toLocaleString('pt-BR');
                                }
                            }
                        }
                    }
                }
            });

            // Gráfico de Distribuição por Status
            const ctxDistribuicao = document.getElementById('distribuicaoStatus').getContext('2d');
            new Chart(ctxDistribuicao, {
                type: 'doughnut',
                data: {
                    labels: ['Recebido', 'Pendente', 'Atrasado'],
                    datasets: [{
                        data: [25750, 8250, 3500],
                        backgroundColor: ['#4CAF50', '#FF9800', '#f44336'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }

        // Carregar tabela com dados
        function carregarTabela() {
            const tbody = document.getElementById('recebimentoTableBody');
            tbody.innerHTML = '';

            dadosMock.titulos.forEach(titulo => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${formatarData(titulo.data)}</td>
                    <td>${titulo.cliente}</td>
                    <td>R$ ${titulo.valor.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</td>
                    <td><span class="status-badge status-${titulo.status}">${getStatusText(titulo.status)}</span></td>
                    <td>${formatarData(titulo.vencimento)}</td>
                    <td>${titulo.observacoes}</td>
                    <td>
                        <button class="action-btn view-btn" title="Visualizar" onclick="visualizarTitulo('${titulo.cliente}')">
                            <i class="fas fa-eye"></i>
                        </button>
                        <button class="action-btn edit-btn" title="Editar" onclick="editarTitulo('${titulo.cliente}')">
                            <i class="fas fa-edit"></i>
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Funções auxiliares
        function formatarData(data) {
            return new Date(data).toLocaleDateString('pt-BR');
        }

        function getStatusText(status) {
            const statusMap = {
                'recebido': 'Recebido',
                'pendente': 'Pendente',
                'atrasado': 'Cliente Não Pagou'
            };
            return statusMap[status] || status;
        }

        function aplicarFiltros() {
            alert('Filtros aplicados!');
            // Implementar lógica de filtros
        }

        function limparFiltros() {
            document.getElementById('periodo').value = 'mes_atual';
            document.getElementById('status').value = '';
            document.getElementById('cliente').value = '';
            document.getElementById('data_inicial').value = '';
            document.getElementById('data_final').value = '';
        }

        function exportarDados() {
            alert('Exportando dados...');
            // Implementar exportação para Excel/PDF
        }

        function atualizarDados() {
            alert('Atualizando dados...');
            // Implementar atualização em tempo real
        }

        function mudarPagina(pagina) {
            alert(`Mudando para página: ${pagina}`);
            // Implementar paginação
        }

        function visualizarTitulo(cliente) {
            alert(`Visualizando título do cliente: ${cliente}`);
            // Implementar modal de visualização
        }

        function editarTitulo(cliente) {
            alert(`Editando título do cliente: ${cliente}`);
            // Implementar modal de edição
        }

        // Inicializar quando a página carregar
        window.addEventListener('DOMContentLoaded', function() {
            inicializarGraficos();
            carregarTabela();
        });

        // Atualizar dados a cada 5 minutos
        setInterval(function() {
            // Aqui você pode implementar atualização automática
            console.log('Verificando atualizações...');
        }, 300000);
    </script>
    <script src="scripts/navigation.js"></script>
    <script>
    window.addEventListener('DOMContentLoaded', function() {
        if (typeof initializeMenu === 'function') {
            initializeMenu();
        }
        document.querySelectorAll('.nav-menu a').forEach(function(link) {
            link.addEventListener('click', function() {
                var modais = ['paymentModal', 'viewModal', 'baixaModal'];
                modais.forEach(function(id) {
                    var modal = document.getElementById(id);
                    if (modal) modal.style.display = 'none';
                });
            });
        });
    });
    </script>
</body>
</html> 
